<!DOCTYPE HTML>
<html lang="fi">
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="chatbot_UI_tyyli.css">
        <title>TUNIBot</title>
        <script src="https://unpkg.com/rivescript@latest/dist/rivescript.min.js"></script>
        <script
			  src="https://code.jquery.com/jquery-3.3.1.js"
			  integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
			  crossorigin="anonymous">	
		</script>
    </head>
    <body>
        <div id="chatbot_frame">
            <div id="banner">
                <p id="banner_text">TUNIBot Prototype</p>
            </div>
            <div id="chatbot_contentpane" style="overflow-y:auto;">
                <table id="chat_content">

                </table>
            </div>
            <div id="textfield_frame">
                <input id="input_field" type="search" placeholder="Type your message...">
                <button id="submit_button">Submit</button>
            </div>

        </div>

        <script type="text/javascript">

            var input = document.getElementById("input_field");
            input.addEventListener("keyup", function(event) {
                event.preventDefault();
                if(event.keyCode === 13) {
                    document.getElementById("submit_button").click();
                }
            });
            bindCallback();

            function bindCallback()
            {
                

                $(document).ready(function()
                { 
                    $("#submit_button").click(function()
                    {
                        var text_value = document.getElementById("input_field").value;

                        var table = document.getElementById("chat_content");
                        var row = table.insertRow(-1);
                        var cell = row.insertCell(0);
                        var child = document.createElement("div");

                        child.textContent = "You said: " + text_value;
                        cell.appendChild(child);

                        $.post("http://localhost:8082/msg",
                        {
                            "query": text_value
                        },
                        function(data, status)
                        {
                            alert("Data: " + data + "\nStatus: " + status);
                        });
                    });

                });
            };

            

        </script>    
    </body>
</html>
